<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Admin DUENEX</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family:Segoe UI, Arial, sans-serif;
  background:#f1f5f9;
  padding:30px;
}

h1{margin-bottom:10px;}

table{
  width:100%;
  border-collapse:collapse;
  background:#fff;
  border-radius:12px;
  overflow:hidden;
  box-shadow:0 15px 35px rgba(0,0,0,.1);
}

th,td{
  padding:14px;
  text-align:left;
}

th{
  background:#38bdf8;
  color:#002b45;
}

tr:nth-child(even){
  background:#f8fafc;
}

.btn{
  padding:8px 14px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  font-weight:600;
}

.entregar{
  background:#22c55e;
  color:#fff;
}

.entregado{
  background:#94a3b8;
  color:#fff;
  cursor:not-allowed;
}

.logout{
  margin-top:20px;
  padding:10px 18px;
  border-radius:10px;
  background:#ef4444;
  color:#fff;
  border:none;
  cursor:pointer;
}
</style>
</head>

<body>

<h1>游닍 Pedidos Pagados</h1>
<p>Solo aparecen pedidos confirmados por Wompi</p>

<table>
<thead>
<tr>
<th>ID</th>
<th>Producto</th>
<th>Plan</th>
<th>Cliente</th>
<th>Estado</th>
<th>Acci칩n</th>
</tr>
</thead>

<tbody id="tablaPedidos"></tbody>
</table>

<button class="logout" onclick="logout()">Cerrar sesi칩n</button>

<script>
// 游댏 Seguridad b치sica
if(localStorage.getItem("admin")!=="true"){
  window.location="login.html";
}

// 游대 PEDIDOS SIMULADOS (Wompi prueba)
// Luego esto se reemplaza por Webhook real
let pedidos = JSON.parse(localStorage.getItem("pedidos")) || [
  {id:1, producto:"Netflix", plan:"3 meses", cliente:"WhatsApp", estado:"pagado"},
  {id:2, producto:"Disney+", plan:"1 mes", cliente:"Correo", estado:"pagado"}
];

function render(){
  const tabla=document.getElementById("tablaPedidos");
  tabla.innerHTML="";
  pedidos.forEach((p,i)=>{
    tabla.innerHTML+=`
    <tr>
      <td>#${p.id}</td>
      <td>${p.producto}</td>
      <td>${p.plan}</td>
      <td>${p.cliente}</td>
      <td>${p.estado}</td>
      <td>
        ${
          p.estado==="pagado"
          ? `<button class="btn entregar" onclick="entregar(${i})">Entregar</button>`
          : `<button class="btn entregado">Entregado</button>`
        }
      </td>
    </tr>
    `;
  });
}

function entregar(i){
  pedidos[i].estado="entregado";
  localStorage.setItem("pedidos",JSON.stringify(pedidos));
  render();
}

function logout(){
  localStorage.removeItem("admin");
  window.location="login.html";
}

render();
</script>

</body>
</html>
